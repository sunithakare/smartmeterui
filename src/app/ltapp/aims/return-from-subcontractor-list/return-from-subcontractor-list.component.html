<div class="mat-typography" fxLayoutAlign="center center">
    <h1>Return From Subcontractor</h1>
</div>
<mat-tab-group mat-stretch-tabs color="primary" [(selectedIndex)]="selectedIndex" class="mat-elevation-z8">
    <mat-tab label="List" style="border-right:2px outset rgba(47, 20, 223, 0.27);">
    <ng-template matTabContent>
        <mat-accordion>
            <mat-expansion-panel >
              <mat-expansion-panel-header >
                <mat-panel-title>
                  Table Filter
                </mat-panel-title>
                <mat-panel-description>
                  Expand Table Filter
                </mat-panel-description>
              </mat-expansion-panel-header>
              <ng-template matExpansionPanelContent>

<div fxLayout="row" fxLayoutAlign="center center"> 
<mat-form-field appearance="fill" style="margin: left 10px;">
<mat-label>Discom</mat-label>
<input matInput type="text" [(ngModel)]='discomSearch'>
</mat-form-field>

<mat-form-field appearance="fill" style="margin-right: 10px;">
<mat-label>Warehouse</mat-label>
<input matInput type="text" [(ngModel)]='warehouseSearch' >
</mat-form-field>

<mat-form-field appearance="fill" style="margin-right: 10px;">
  <mat-label>Sub Contractor</mat-label>
  <input matInput type="text" [(ngModel)]='subcontractorSearch'>
  </mat-form-field>

  <mat-form-field appearance="fill" style="margin-right: 10px;">
    <mat-label>Item Group</mat-label>
    <input matInput type="text" [(ngModel)]='itemGroupSearch' >
    </mat-form-field>

    <mat-form-field appearance="fill" style="margin-right: 10px;">
      <mat-label>Item Status</mat-label >
      <input matInput type="text" [(ngModel)]='itemStatusSearch' >
      </mat-form-field>

      <mat-form-field appearance="fill" style="margin-right: 10px;">
        <mat-label>Item Model Name</mat-label>
        <input matInput type="text" [(ngModel)]='itemModelNameSearch'>
        </mat-form-field>

        <button mat-stroked-button color="primary"  style="margin-left: 10px;" (click)="searchWithFilter()"> <mat-icon>search</mat-icon> </button>
</div>
</ng-template>
</mat-expansion-panel>
</mat-accordion>
<div fxLayout="column">
    <mat-progress-bar
       mode="indeterminate"
       *ngIf="isLoading"
    ></mat-progress-bar>
       <mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8" style="width: 200%;">
        <ng-container matColumnDef="trnId">
          <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Trans ID</mat-header-cell>
          <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["trnId"] }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="transStatus">
          <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Trans Status</mat-header-cell>
          <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["transStatus"] }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="discom">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Discom</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["discom"] }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="warehouseName">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Warehouse</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["warehouseName"] }}</mat-cell>
          </ng-container>

          <!-- <ng-container matColumnDef="subcontractorType">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Subcontractor Type</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["subcontractorType"] }}</mat-cell>
          </ng-container> -->

          <ng-container matColumnDef="subcontractor">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Subcontractor</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["subcontractor"] }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="docNo">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Doc No</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["docNo"] }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="docDate">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">DC Date</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["docDate"]}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="itemGroup">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Item Group</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["itemGroup"] }}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="itemModelName">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Item Model Name</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["itemModelName"] }}</mat-cell>
          </ng-container>
          <ng-container matColumnDef="supplier">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Item Supplier</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["supplier"] }}</mat-cell>
          </ng-container>
          <ng-container matColumnDef="itemCategory">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Item Category</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["itemCategory"] }}</mat-cell>
          </ng-container>
          <ng-container matColumnDef="itemStatus">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Item Status</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["itemStatus"] }}</mat-cell>
          </ng-container>
          <ng-container matColumnDef="submite">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Submite</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["submite"] }}</mat-cell>
          </ng-container>
          <ng-container matColumnDef="recieved">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Recieved</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["recieved"] }}</mat-cell>
          </ng-container>
          <ng-container matColumnDef="docView">
            <mat-header-cell *matHeaderCellDef mat-sort-header class="TableHeader">Doc View</mat-header-cell>
            <mat-cell *matCellDef="let element" class="TableDataCell">{{ element["docView"] }}</mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row matRipple
          (click)="navToDetails(row)"
            *matRowDef="let row; columns: displayedColumns">
         </mat-row>
      </mat-table>
      <mat-paginator
      [length]="totalRows"
      [pageSize]="pageSize"
      [pageIndex]="currentPage"
      [pageSizeOptions]="pageSizeOptions"
      showFirstLastButtons
      (page)="onChangePage($event)"
      aria-label="Select page"
    ></mat-paginator>

   </div>

</ng-template>
</mat-tab>
<mat-tab label="Detail">
    <app-return-from-subcontractor-details [returnFromSubcontractorDetails]="returnFromSubcontractorResponse" [isEditable]="isEditable" [isNavigation]="isNavigation" (dataSaved)="loadListTab()"></app-return-from-subcontractor-details>
</mat-tab>
</mat-tab-group>
<div class="overlay" *ngIf="spinner">
    <div class="spinner">
      <mat-progress-spinner diameter="50" mode="indeterminate" color="accent">
      </mat-progress-spinner>
    </div>
    </div>

    <div style="z-index:2; position : fixed;bottom : 5%;left: 95%; margin-bottom : 1%;" *ngIf="selectedIndex==0">
        <button mat-fab color="primary" (click)="addNewsubcontractorData()" *ngIf="isDetailsEditable" title="Add Return From Subcontractor">
        <mat-icon>add</mat-icon>
        </button>
        </div>
